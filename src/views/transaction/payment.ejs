<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Payment</title>
    <%- include('../partials/cdn')  %>
    <style>

        #ticket:before {
            content: "";
            background: #fff;
            width: 32px;
            height: 32px;
            position: absolute;
            top: -16px;
            left: -24px;
            border-radius: 100%;
        }
    
        #ticket:after {
            content: "";
            background: #fff;
            width: 32px;
            height: 32px;
            position: absolute;
            top: -16px;
            right: -24px;
            border-radius: 100%;
        }
    
        #ticket {
            border-top: 1px dashed #bdbdbd;
            position: relative;
        }
    
    </style>
</head>




<body class="bg-light">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-sm-10 col-md-8 col-12 col-xl-7" style="min-width: 600px;">
                <div class="px-5 py-4 rounded-4 shadow bg-white">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="d-flex align-items-center">
                            <div class="fs-1"><i class="fa-solid fa-building-columns"></i></div>
                            <h1 class="mb-0 ps-3">Payment System</h2>
                        </div>
                        <div id="countdown">
                            <span class="badge p-2 fs-5 bg-dark">0</span>
                            <span style="margin-left:2px" class="badge p-2 fs-5 bg-dark">0</span>
                            <span class="fs-5">:</span>
                            <span class="badge p-2 fs-5 bg-dark">0</span>
                            <span style="margin-left:2px" class="badge p-2 fs-5 bg-dark">0</span>
                        </div>
                    </div>

                    <div class="mt-4">
                        <div class="mb-1">Account holder: Vuong Huynh Khai</div>
                        <div class="mb-1">Account number: 12345678974100</div>
                        <div class="mb-1">Balance: $1000</div>
                    </div>

                    <div class="row justify-content-center">
                        <div class="bg-light col-9 mt-4 rounded-4">
                            <div class="p-4">
                                <div class="row justify-content-between">
                                    <div class="col-6">Order</div>
                                    <div class="col-6 text-end fw-semibold">123456789741</div>
                                </div>

                                <div class="row justify-content-between">
                                    <div class="col-6">Beneficiary</div>
                                    <div class="col-6 text-end fw-semibold">Book Store</div>
                                </div>

                                <div class="row justify-content-between">
                                    <div class="col-6">Beneficiary account</div>
                                    <div class="col-6 text-end fw-semibold">99999999999999</div>
                                </div>

                                <div class="row justify-content-between">
                                    <div class="col-6">Subtotal</div>
                                    <div class="col-6 text-end fw-semibold">$ 200</div>
                                </div>

                                <div class="row justify-content-between">
                                    <div class="col-6">Tax</div>
                                    <div class="col-6 text-end fw-semibold">0</div>
                                </div>
                            </div>
                            <div id="ticket">
                                <div class="d-flex p-4 align-items-center justify-content-between">
                                    <div>You Have to Pay</div>
                                    <div class="fs-2 text-success"><strong>$ 200</strong></div>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 d-flex justify-content-between mt-5">
                            <a href="#" class="btn btn-outline-danger py-1 fs-3 col-6 text-center text-uppercase me-3">Cancel</a>
                            <button id="btn-payment" class="btn btn-outline-success py-1 fs-3 col-6 text-center text-uppercase">Pay</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <form id="form-payment" action="" method="post" class="d-none">
        <input type="text" name="payment" id="" value="">
    </form>

    <script>
        function updateCountdown() {
            const countdownElement = document.getElementById('countdown');
            let remainingSeconds = Math.max(0, Math.round((targetTime - Date.now()) / 1000));
            const minutes = Math.floor(remainingSeconds / 60);
            const seconds = remainingSeconds % 60;

            countdownElement.children[1].textContent = minutes;
            countdownElement.children[3].textContent = parseInt(seconds / 10)
            countdownElement.children[4].textContent = seconds % 10

            // If the countdown reaches 0, you can perform additional actions
            if (remainingSeconds === 0) {
                clearInterval(countdownInterval);
                window.location.href = '/payment/error';
            }
        }

        const createdTime = new Date()
        const targetTime = new Date(createdTime.getTime() + 5 * 60 * 1000);
        const countdownInterval = setInterval(updateCountdown, 1000);
        updateCountdown();


        $(() => {
            $('#btn-payment').click((e) => {
                $('#form-payment').submit();
            })
        })
    </script>
</body>

</html>